<%- include('../partials/head', {data: data}); -%>
<%- include('../partials/adminnav', {data: data}); -%>
<%- include('../partials/popup', {data: data}); -%>


<h1 class="admin-heading admin-heading--primary">Pood</h1>

<form class="admin__form" action="/api/shop/intro">

  <h3 class="admin-heading admin-heading--secondary">Sissejuhatav tekst</h3>
  <div class="admin__input-group">
    <h3 class="admin-heading admin-heading--tertiary">Sisu</h3>
    <div class="column-container">
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">EST</h3>
        <div class="admin__editor">
          <div class="editor" id="shopIntroEstEditor"><%- data.intros[8].est %></div>
        </div>
        <input class="admin__hidden-input" id="shopIntroEst" name="shopIntroEst" type="text" value="<%= data.intros[8].est %>">
      </div>
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">EN</h3>
        <div class="admin__editor">
          <div class="editor" id="shopIntroEnEditor"><%- data.intros[8].en %></div>
        </div>
        <input class="admin__hidden-input" id="shopIntroEn" name="shopIntroEn" type="text" value="<%= data.intros[8].en %>">
      </div>
    </div>
    <div class="column-container">
      <button class="btn btn--admin btn--admin--large" type="submit">Salvesta</button>
    </div>
  </div>
</form>

<div class="dataGroup" id="shopItems">

<% for (var i = 0; i < data.shopItems.length; i++) { %>

<form class="admin__form dataElement" data-action="/api/shop/items/<%= i + 1 %>" action="/api/shop/items/<%= i + 1 %>">

  <h3 class="admin-heading admin-heading--secondary">Toode <%= i + 1 %></h3>
  <div class="admin__input-group">
    <div class="column-container">
      <div class="admin__input__item">
        <h3 class="admin-heading admin-heading--tertiary u-margin">Pilt</h3>
        <input class="admin__hidden-input" id="shopImg<%= i + 1 %>" name="shopImg<%= i + 1 %>" type="file">
        <label class="btn btn--admin btn--admin--small" for="shopImg<%= i + 1 %>">Vali fail</label>
        <p class="admin__label" id="shopImg<%= i + 1 %>Label"><%= data.shopImages[i].filename %></p>
        <img class="admin__preview" id="shopImg<%= i + 1 %>Preview" src="<%= data.shopImages[i].url %>" alt="Toote pilt">
      </div>
    </div>
  </div>
  <hr>
  <div class="admin__input-group">
    <h3 class="admin-heading admin-heading--tertiary">Üldinfo</h3>
    <div class="column-container">
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">EST</h3>
        <input class="admin__input admin__input--bold" name="shopItem<%= i + 1 %>HeadingEst" type="text" value="<%= data.shopItems[i].heading.est %>">
      </div>
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">EN</h3>
        <input class="admin__input admin__input--bold" name="shopItem<%= i + 1 %>HeadingEn" type="text" value="<%= data.shopItems[i].heading.en %>">
      </div>
    </div>
    <div class="column-container">
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">HIND (€)</h3>
        <input class="admin__input" name="shopItem<%= i + 1 %>Price" type="number" required value="<%= data.shopItems[i].price %>">
      </div>
    </div>
    <h3 class="admin-heading admin-heading--tertiary">Kirjeldus</h3>
    <div class="column-container">
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">EST</h3>
        <div class="admin__editor">
          <div class="editor" id="shopItem<%= i + 1 %>EstEditor"><%- data.shopItems[i].content.est %></div>
        </div>
        <input class="admin__hidden-input" id="shopItem<%= i + 1 %>Est" name="shopItem<%= i + 1 %>Est" type="text" value="<%= data.shopItems[i].content.est %>">
      </div>
      <div class="admin__input-item">
        <h3 class="admin-heading admin-heading--quarternary">EN</h3>
        <div class="admin__editor">
          <div class="editor" id="shopItem<%= i + 1 %>EnEditor"><%- data.shopItems[i].content.en %></div>
        </div>
      </div>
      <input class="admin__hidden-input" id="shopItem<%= i + 1 %>En" name="shopItem<%= i + 1 %>En" type="text" value="<%= data.shopItems[i].content.en %>">
    </div>
    <div class="column-container">
      <button class="btn btn--admin btn--admin--large" type="submit">Salvesta</button>
      <a class="btn btn--admin btn--admin--large dataDeleteBtn" data-index="<%= i + 1 %>" data-action="/api/shop/items/<%= i + 1 %>" tabindex="0">Kustuta</a>
    </div>
  </div>

</form>

<% } %>

</div>

<a class="btn btn--admin btn--admin--large dataAddBtn" data-for="shopItems" data-action="/api/shop/items" tabindex="0">+ Lisa Toode +</a>


<%- include('../partials/footer') -%>
